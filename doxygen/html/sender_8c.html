<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ELEC 331 Programming Assignment 1: src/sender.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ELEC 331 Programming Assignment 1
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">sender.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Functions for sending data over an enhanced UDP protocol.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;arpa/inet.h&gt;</code><br />
<code>#include &lt;netinet/in.h&gt;</code><br />
<code>#include &lt;netdb.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/socket.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;sys/time.h&gt;</code><br />
<code>#include &quot;<a class="el" href="packet__header_8h_source.html">packet_header.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6b20d41d6252e9871430c242cb1a56e7" id="r_a6b20d41d6252e9871430c242cb1a56e7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6b20d41d6252e9871430c242cb1a56e7">BUFFER_SIZE</a>&#160;&#160;&#160;10000</td></tr>
<tr class="separator:a6b20d41d6252e9871430c242cb1a56e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c27aef383a8c9d5d7dda3659f60a9d2" id="r_a0c27aef383a8c9d5d7dda3659f60a9d2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0c27aef383a8c9d5d7dda3659f60a9d2">ACK_TIMEOUT_USEC</a>&#160;&#160;&#160;30000</td></tr>
<tr class="separator:a0c27aef383a8c9d5d7dda3659f60a9d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2087e335be12553941157d9914755759" id="r_a2087e335be12553941157d9914755759"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2087e335be12553941157d9914755759">MAX_RESEND_ATTEMPTS</a>&#160;&#160;&#160;5</td></tr>
<tr class="separator:a2087e335be12553941157d9914755759"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54619b1687e9899d304d27f631f956ce" id="r_a54619b1687e9899d304d27f631f956ce"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a54619b1687e9899d304d27f631f956ce">LINK_CAPACITY</a>&#160;&#160;&#160;20000000</td></tr>
<tr class="separator:a54619b1687e9899d304d27f631f956ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a73da229ea16b7739ac467eb06b01d912" id="r_a73da229ea16b7739ac467eb06b01d912"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a73da229ea16b7739ac467eb06b01d912">sendClosingPacket</a> (int sockDescriptor, struct sockaddr_in *destAddr, int sequenceNumber)</td></tr>
<tr class="memdesc:a73da229ea16b7739ac467eb06b01d912"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a closing packet to the specified destination address.  <br /></td></tr>
<tr class="separator:a73da229ea16b7739ac467eb06b01d912"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a470031165b913666b8a71d2b05ba7815" id="r_a470031165b913666b8a71d2b05ba7815"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a470031165b913666b8a71d2b05ba7815">rsend</a> (char *hostname, unsigned short int hostUDPport, char *filename, unsigned long long int bytesToTransfer)</td></tr>
<tr class="memdesc:a470031165b913666b8a71d2b05ba7815"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a file over UDP to the specified destination.  <br /></td></tr>
<tr class="separator:a470031165b913666b8a71d2b05ba7815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627" id="r_a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="memdesc:a3c04138a5bfe5d72780bb7e82a18e627"><td class="mdescLeft">&#160;</td><td class="mdescRight">Entry point for the UDP file receiver program.  <br /></td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions for sending data over an enhanced UDP protocol. </p>
<p>This file contains the implementation of functions responsible for sending data over the enhanced UDP protocol. It includes a key function rsend which handles sending packets and handling acknowledgments.</p>
<dl class="section author"><dt>Author</dt><dd>Maddy Paulson (maddypaulson) </dd>
<dd>
Leo Kamino (LeonardoKamino) </dd></dl>
<dl class="bug"><dt><b><a class="el" href="bug.html#_bug000003">Bug</a></b></dt><dd>No known bugs. </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a0c27aef383a8c9d5d7dda3659f60a9d2" name="a0c27aef383a8c9d5d7dda3659f60a9d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c27aef383a8c9d5d7dda3659f60a9d2">&#9670;&#160;</a></span>ACK_TIMEOUT_USEC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ACK_TIMEOUT_USEC&#160;&#160;&#160;30000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Definition for ACK timeout in microseconds. </p>

</div>
</div>
<a id="a6b20d41d6252e9871430c242cb1a56e7" name="a6b20d41d6252e9871430c242cb1a56e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b20d41d6252e9871430c242cb1a56e7">&#9670;&#160;</a></span>BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUFFER_SIZE&#160;&#160;&#160;10000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Definition to indicate size of the buffer. </p>

</div>
</div>
<a id="a54619b1687e9899d304d27f631f956ce" name="a54619b1687e9899d304d27f631f956ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54619b1687e9899d304d27f631f956ce">&#9670;&#160;</a></span>LINK_CAPACITY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LINK_CAPACITY&#160;&#160;&#160;20000000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Definition that represents the network link capacity that the sender will assume for calculating bandwidth utilization </p>

</div>
</div>
<a id="a2087e335be12553941157d9914755759" name="a2087e335be12553941157d9914755759"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2087e335be12553941157d9914755759">&#9670;&#160;</a></span>MAX_RESEND_ATTEMPTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_RESEND_ATTEMPTS&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Definition specifying the maximum number of resend attempts for a packet if the acknowledgment (ACK) is not received within the timeout period. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a3c04138a5bfe5d72780bb7e82a18e627" name="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c04138a5bfe5d72780bb7e82a18e627">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>argc</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **</td>          <td class="paramname"><span class="paramname"><em>argv</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Entry point for the UDP file receiver program. </p>
<p>This function parses command line arguments and initiates the file sending process by calling the rsend function. The program expects exactly two arguments: the UDP port to send data to, and the filename of the file to be sent.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>The number of command line arguments. </td></tr>
    <tr><td class="paramname">argv</td><td>The array of command line arguments. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int EXIT_SUCCESS returned on successful completion or error code 1 on failure. </dd></dl>

</div>
</div>
<a id="a470031165b913666b8a71d2b05ba7815" name="a470031165b913666b8a71d2b05ba7815"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a470031165b913666b8a71d2b05ba7815">&#9670;&#160;</a></span>rsend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rsend </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>hostname</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short int</td>          <td class="paramname"><span class="paramname"><em>hostUDPport</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>filename</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long long int</td>          <td class="paramname"><span class="paramname"><em>bytesToTransfer</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a file over UDP to the specified destination. </p>
<p>This function sends a file over User Datagram Protocol (UDP) to the specified destination hostname and port. It reads the file specified by the filename and sends it in chunks (packets) until all bytes are transferred or until an error occurs. It uses acknowledgments (ACKs) to ensure reliable delivery of packets and handles retransmissions in case of timeouts or errors. The function also measures the bandwidth during the transmission process.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hostname</td><td>The hostname or IP address of the destination. </td></tr>
    <tr><td class="paramname">hostUDPport</td><td>The hostname or IP address of the destination. </td></tr>
    <tr><td class="paramname">filename</td><td>The name of the file to be sent. </td></tr>
    <tr><td class="paramname">bytesToTransfer</td><td>The total number of bytes to transfer from the file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Void. </dd></dl>

</div>
</div>
<a id="a73da229ea16b7739ac467eb06b01d912" name="a73da229ea16b7739ac467eb06b01d912"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73da229ea16b7739ac467eb06b01d912">&#9670;&#160;</a></span>sendClosingPacket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sendClosingPacket </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>sockDescriptor</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sockaddr_in *</td>          <td class="paramname"><span class="paramname"><em>destAddr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>sequenceNumber</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a closing packet to the specified destination address. </p>
<p>This function sends a closing packet containing the provided sequence number to the specified destination address using the given socket descriptor. The closing packet indicates the end of the data transmission. It retransmits the closing packet up to a maximum number of times defined by MAX_RESEND_ATTEMPTS until an acknowledgment packet is received or the maximum attempts are exhausted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sockDescriptor</td><td>The socket descriptor for sending the closing packet. </td></tr>
    <tr><td class="paramname">destAddr</td><td>The destination address to send the closing packet. </td></tr>
    <tr><td class="paramname">sequenceNumber</td><td>The sequence number of the closing packet. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Void. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
