<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ELEC 331 Programming Assignment 1: Our implementation vs TCP</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ELEC 331 Programming Assignment 1
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">ELEC 331 Programming Assignment 1</a></li><li class="navelem"><a class="el" href="main_test_page.html">PA1 Test Page</a></li>  </ul>
</div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Our implementation vs TCP</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="compare1"></a>
1.0 Calculation of Bandwidth &amp; Throughput</h1>
<p>See <a class="el" href="bandwidth_and_throughput.html">Bandwidth &amp; Throughput Calculations</a> </p>
<h1><a class="anchor" id="compare2"></a>
2.0 TCP Implementation</h1>
<p>In order to compare our implementation with the TCP protocol, we decided to create an implementation of the TCP protocol. The implementation try to be as close as possible to our enhanced protocol, but using SOCK_STREAM instead. The implementation is divided in two files, <a class="el" href="sender__tcp_8c.html" title="Functions for sending data over TCP protocol.">sender_tcp.c</a> and <a class="el" href="receiver__tcp_8c.html" title="Functions for receiving data over TCP Protocol.">receiver_tcp.c</a>. The <a class="el" href="sender__tcp_8c.html" title="Functions for sending data over TCP protocol.">sender_tcp.c</a> file contains the implementation of functions responsible for sending data over the TCP protocol. It includes a key function tsend which handles the connection. The <a class="el" href="receiver__tcp_8c.html" title="Functions for receiving data over TCP Protocol.">receiver_tcp.c</a> file contains the implementation of functions responsible for receiving data over the TCP protocol. It includes key functions for handling incoming data and compiling the output file.</p>
<h2><a class="anchor" id="file_tcp_link"></a>
2.1 Files for TCP implementation</h2>
<ul>
<li><a class="el" href="sender__tcp_8c.html">sender_tcp.c</a></li>
<li><a class="el" href="receiver__tcp_8c.html">receiver_tcp.c</a> </li>
</ul>
<h1><a class="anchor" id="compare3"></a>
3.0 Expectation 5 &amp; 6</h1>
<ul>
<li>Expectation 5 - Your protocol must be somewhat TCP friendly: an instance of TCP competing with your implementation must receive, on average, at least half as much throughput as your flow.</li>
<li>Expectation 6 - An instance of your protocol competing with TCP must receive, on average, at least half as much throughput as the TCP flow. (Your protocol must not be overly nice.) </li>
</ul>
<h2><a class="anchor" id="exp5"></a>
3.1 Key Requirements</h2>
<ol type="1">
<li>Have an instance of TCP competing with our protocol on the same private network.</li>
<li>Make sure that the TCP instance and our protocol get half as much throughput as our implementation.</li>
<li>Should share with TCP instance but not be too nice. </li>
</ol>
<h1><a class="anchor" id="tcp_3"></a>
4.0 Explanation of Testing</h1>
<h2><a class="anchor" id="tcpTest1"></a>
4.1 Have an instance of TCP competing with our protocol on the same private network.</h2>
<ul>
<li>To complete this requirement in testing we used two juno sessions for two senders and two europa sessions for two receivers. There is a pair with a TCP sender and receiver and a pair with an enhanced UDP sender and receiver.</li>
<li>We tested the two protocols competing, using the same file and the same amount of bytes to transfer, with implementations running in different ports.</li>
<li>We started the sender for the TCP and enhanced UDP protocol at almost the same time </li>
</ul>
<h2><a class="anchor" id="tcpTest2"></a>
4.2 Make sure that the TCP instance and our protocol get half as much throughput as our implementation.</h2>
<ul>
<li>To complete this requirement in testing we calculated the throughput for each protocol using <a class="el" href="bandwidth_and_throughput.html">Bandwidth &amp; Throughput Calculations</a></li>
<li>Then we compared the throughput between the TCP implementation and our implementation to determine that the throughput of TCP was about half of the throughput of our protocol. </li>
</ul>
<h2><a class="anchor" id="tcpTest4"></a>
4.3 Important Notes</h2>
<ul>
<li>The results of this testing depend on the size of the buffer which reflects the packet size. Currently the packet size for both the sender and receiver is set at 10000. <div class="fragment"><div class="line"><span class="preprocessor">#define BUFFER_SIZE 10000</span></div>
</div><!-- fragment --> </li>
</ul>
<h1><a class="anchor" id="tcp_4"></a>
4.0 Testing Expectation 4 - Usage Instructions</h1>
<ol type="1">
<li>Create a cloudlab experiment using the setup for Lab2A</li>
<li>ssh into 2 instances of Europa and 2 instances of Juno. In this case we will consider Juno as the sender and Europa as the receiver</li>
<li>On one of the senders (Juno) run the following commands to clear existing settings on the network and add a new netem qdisc to limit the outbound traffic rate to 20 Mbit/s<ul>
<li>Clear existing qdisc settings: <div class="fragment"><div class="line">sudo tc qdisc del dev eth0 root 2&gt;/dev/null</div>
</div><!-- fragment --></li>
<li>Add a new netem qdisc with a rate of 20 Mbit/s: <div class="fragment"><div class="line">sudo tc qdisc add dev eth0 root netem rate 20Mbit</div>
</div><!-- fragment --></li>
</ul>
</li>
<li>On the TCP receiver (Europa 1) run the following command to run the TCP implementation of the receiver, assuming the UDP port is 12345 and receiver.avi is an empty .avi file <div class="fragment"><div class="line">./receiver_tcp 12345 receiver.avi</div>
</div><!-- fragment --></li>
</ol>
<ol type="1">
<li>On the enhanced UDP receiver (Europa 2) run the following command to run the enhanced UDP implementation of the receiver, assuming the UDP port is 12346 and receiver2.avi is an empty .avi file <div class="fragment"><div class="line">./receiver 12346 receiver2.avi</div>
</div><!-- fragment --></li>
<li>Now on both of the senders (Juno 1 &amp; 2) prepare the commands required but don't send until you can do both at the same time <div class="fragment"><div class="line">./sender_tcp clnodevm127-1.clemson.cloudlab.us 12345 Test.avi 6000000</div>
</div><!-- fragment --> <div class="fragment"><div class="line">./sender clnodevm127-1.clemson.cloudlab.us 12346 Test2.avi 6000000</div>
</div><!-- fragment --> </li>
</ol>
<h2><a class="anchor" id="tcp_results"></a>
4.1 Test Results</h2>
<ul>
<li>TCP Sender (Juno 1): <div class="fragment"><div class="line">Hostname: clnodevm127-1.clemson.cloudlab.us</div>
<div class="line">Throughput: 21.06 Mb/s</div>
<div class="line">Bandwidth Utilization: 100.42%</div>
<div class="line">Time:  2.26</div>
</div><!-- fragment --></li>
<li>Enhanced UDP Sender (Juno 2): <div class="fragment"><div class="line">Throughput: 9.14 Mb/s</div>
<div class="line">Bandwidth Utilization: 43.57%</div>
<div class="line">Transfer:  5.22</div>
<div class="line">Time:  3.90</div>
</div><!-- fragment --></li>
<li>TCP Receiver (Europa 1): <div class="fragment"><div class="line">Server is listening on port 12345</div>
<div class="line">File transfer complete.</div>
</div><!-- fragment --></li>
<li>Enhanced UDP Receiver (Europa 2): <div class="fragment"><div class="line">Last packet received. Sequence Number: 597</div>
<div class="line">Sent final ack for sequence number: 597</div>
</div><!-- fragment --> </li>
</ul>
<h2><a class="anchor" id="tcp_results2"></a>
4.2 Explanation of Results</h2>
<ul>
<li>The calculation for the throughput and bandwidth was giving us a value of ~100%, however we believe this is likely due to the fact that the limiting commands we use to set up our network, sometimes still allows a transfer of data at a rate higher than the one set by the command.</li>
<li>Based on the fact that our enhanced protocol is taking on 43.57% and with the above considered we believe that our protocol receives around ~50% of the throughput. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
